<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        Permission List
    </h1>
    <ol class="breadcrumb">
      <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
      <li><a href="#">Permissions</a></li>
      <li class="active">List</li>
    </ol>
  </section>
  <!-- Main content -->
  <section class="content">
    <div class="row">
      <div class="col-xs-12">
        <div class="box">
          <div class="box-header">
            <h3 class="box-title">Demandes de congé</h3>
          </div>
          <!-- /.box-header -->
        <div class="box-body">
      <table id="example1" class="table table-bordered table-hover">
        <thead>
          <tr>
            <th>Employee Profil</th>
            <th>Type </th>
            <th>Motif</th>
            <th>date Debut</th>
            <th>date Fin</th>
            <th>date Reprise</th>
            <th>date Creation</th>
            <th>Statut</th>
            <th>Approuvé</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody >
          <tr *ngFor="let permission of permissions | async" >
            <td >
              <div class="col-md-4">
              <div class="box-body box-profile">
                <div class="img-circle">
                  <img  [src]="permission.employee.image" class="img-circle" width="50px" height="50px" >
                </div>
              </div>
              </div><div class="col-md-8"><br>{{permission.employee.lastName}} {{permission.employee.firstName}}</div>
            </td>
            <td><br>{{permission.type}}</td>
            <td><br>{{permission.motif}}</td>
            <td><br>{{permission.dateDebut | date :  "dd/MM/y hh:mm"}}</td>
            <td><br>{{permission.dateFin | date :  "dd/MM/y hh:mm"}}</td>
            <td><br>{{permission.dateReprise | date :  "dd/MM/y hh:mm"}}</td>
            <td><br>{{ permission.createdAt | date :  "dd/MM/y hh:mm" }}</td> 
            <td *ngIf="permission.status=='demandé'"><br><span class="label label-warning" style="font-size: small;">{{permission.status}}</span></td>
            <td *ngIf="permission.status=='approuvé'"><br><span class="label label-info"  style="font-size: small;">{{permission.status}}</span></td>
            <td *ngIf="permission.status=='approuvé'"><br>
            
              <ui-switch [ngModel]="true" (ngModelChange)="manualUpdateEvent($event,permission.id)"></ui-switch>
            
            </td>
            <td *ngIf="permission.status=='demandé'" ><br>
            
              <ui-switch [ngModel]="false" (ngModelChange)="manualUpdateEvent($event,permission.id)"></ui-switch>
            
            </td>
            <td><br>
                
                <button (click)="deletePermission(permission.id)" class="btn bg-maroon glyphicon glyphicon-trash" style="margin-left: 10px"></button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <!-- /.box-body -->
  </div>
  <!-- /.box -->
  </div>
  <!-- /.col -->
  </div>
  <!-- /.row -->
  </section>
  
  